<!doctype html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Informatica PowerCenter Designer - Kopiowanie Danych ze Zrodla Relacyjnego</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="">
  <link rel="canonical" href="http://localhost:4000/2020/04/26/Informatica-Kopiowanie-Danych-ze-Zrodla-Relacyjnego.html">

  <!-- Roboto Font -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700" rel="stylesheet">
  
  <!-- MathJax -->
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/main.css">
  <!--
  <link rel="stylesheet" href="/css/chaosmail.css">
  -->
</head>
<html>
  <body>
    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>Informatica PowerCenter Designer - Kopiowanie Danych ze Zrodla Relacyjnego</h1>
    <p class="meta">Published on Apr 26, 2020 • mleczkom</p>
  </header>

  <article class="post-content">
  <p>Dzisiaj chciałbym Wam pokazać jak z wykorzystaniem Informatica PowerCenter przekopiować dane z jednej tabeli relacyjnej do drugiej tabeli relacyjnej.
Całość implementacji rozwiązania będzie składała się z 4 kroków:</p>
<ol>
  <li>Utworzenia źródła relacyjnego</li>
  <li>Utworzenia celu relacyjnego</li>
  <li>Utworzenie mapping-u</li>
  <li>Utworzenie workflow-u</li>
</ol>

<h1 id="1-utworzenie-zrodla-relacyjnego">1. Utworzenie zrodla relacyjnego</h1>

<p>Mianowicie, możemy to zrobić na dwa sposoby:</p>
<ul>
  <li>ręcznie, gdzie sami musimy zdefiniować metadane źródła (nazwy kolumny oraz typy danych),</li>
  <li>lub z wykorzystaniem jednej z funkcjonalności Designer-a, która automatycznie zaczyta metadane wskazanego przez nas źródła danych.</li>
</ul>

<p>Bardziej praktyczne wydaje się skorzystanie z drugiej opcji i to na niej skupię się w tym wpisie.
Na początku uruchamiamy Designer-a, łączymy się z naszym ulubionym repozytorium a następnie przechodzimy do zakladki <code class="highlighter-rouge">Source Analyzer</code> [1]
<img src="/images/RelationalConnection00.png" alt="relconn0" /></p>

<p>a nastepnie uzywamy funkcji <code class="highlighter-rouge">Sources-&gt;Import from Database...</code> <br />
<img src="/images/RelationalConnection01.png" alt="relconn1" /></p>

<p>Zmieniamy zrodlo klikajac <code class="highlighter-rouge">...</code> [1] a nastepnie w nowo otwartym oknie w zakladce <code class="highlighter-rouge">DNS uzytkownika</code> wybieramy istniejace juz zrodlo danych badz dodajemy nowe klikajac <code class="highlighter-rouge">Dodaj...</code> [2]. Ja pokaze jakie kroki musimy wykonac aby dodac nowe zrodlo. Klikamy <code class="highlighter-rouge">Dodaj...</code> <br /> W nowo otwartym oknie wybieramy rodzaj sterownika -&gt; <code class="highlighter-rouge">SQL Server Native Client 11.0</code> (w naszym przypadku jest to wersja 11.0 ale moze byc uzyta kazda dostepna)</p>

<p><img src="/images/RelationalConnection02.png" alt="relconn2" /></p>

<p>a nastepnie klikamy <code class="highlighter-rouge">Zakoncz</code>. W kolejnym oknie wpisujemy nazwe naszego zrodla danych [1] a nastepnie podajemy nazwe/adress IP serwera [2]</p>

<p><img src="/images/RelationalConnection03.png" alt="relconn3" /></p>

<p>i klikamy <code class="highlighter-rouge">Dalej</code>. Nastepnie zmieniamy rodzaj autentykacji na <strong>SQL Server Authentication</strong> [1] i podajemy nazwe i haslo uzytkownika ktorego bedziemy wykorzystwac do polaczenia z baza danych [2].</p>

<p><img src="/images/RelationalConnection04.png" alt="relconn4" /></p>

<p>i klikamy <code class="highlighter-rouge">Dalej</code>. W kolejnym oknie zmieniamy nazwe bazy danych na taka do ktorej chcemy sie polaczyc. W naszym przypadku jest to baza <code class="highlighter-rouge">NORTHWND</code></p>

<p><img src="/images/RelationalConnection05.png" alt="relconn5" /></p>

<p>i klikamy <code class="highlighter-rouge">Dalej</code> i <code class="highlighter-rouge">Zakoncz</code> na kolejny.</p>

<p><img src="/images/RelationalConnection06.png" alt="relconn6" /></p>

<p>Po utworzeniu nowego zrodla danych mozemy przejsc do utworzenia polaczenia do tabeli zrodlowej. W tym celu wybieramy [1] nasze nowo utworzone zrodlo danych. Ponownie podajemy nazwe uzytkownika [2] i haslo [3] ktorego bedziemy uzywac do laczenia sie z baza danych a nastepnie klikamy <code class="highlighter-rouge">Connect</code> [4].</p>

<p><img src="/images/RelationalConnection07.png" alt="relconn7" /></p>

<p>Zmieniamy ustawienia [5] tak aby widziec wszystkie dostepne dla naszego uzytkownika obiekty (tabel, widoki itd.) w bazie danych. Wybieramy ten ktory nas interesuje [6] i klikamy <code class="highlighter-rouge">OK</code>. Powinnismy zobaczyc nowe zrodlo w folderze <code class="highlighter-rouge">Sources</code>.</p>

<p><img src="/images/RelationalConnection08.png" alt="relconn8" /></p>

<h1 id="2-utworzenie-celu-relacyjnego">2. Utworzenie celu relacyjnego</h1>

<p>Z konfiguracja polaczenia do tabeli docelowej postepujemy podobnie jak z konfiguracja polaczenia do tabeli zrodlowej. Roznica jest taka ze zamiast przejsc do zakladki <code class="highlighter-rouge">Source Analyzer</code> przechodzimy do zakladki <code class="highlighter-rouge">Target Designer</code> [1] a nastepnie uzywamy funkcji <code class="highlighter-rouge">Targets-&gt;Imports from Database...</code></p>

<p><img src="/images/RelationalConnection09.png" alt="relconn9" /></p>

<p>Nastepnie wybieramy [1] nasze zrodlo danych (lub tworzymy nowe tak jak zostalo to pokazane w kroku o tworzeniu polaczenia do tabeli zrodlowej, podajemy nazwe uzytkownika [2] i haslo [3] ktorego bedziemy uzywac do laczenia sie z baza danych a nastepnie klikamy <code class="highlighter-rouge">Connect</code> [4].</p>

<p><img src="/images/RelationalConnection10.png" alt="relconn10" /></p>

<p>Zmieniamy ustawienia [5] tak aby widziec wszystkie dostepne dla naszego uzytkownika obiekty (tabel, widoki itd.) w bazie danych. Wybieramy ten ktory nas interesuje [6] i klikamy <code class="highlighter-rouge">OK</code>. Powinnismy zobaczyc nowe target w folderze <code class="highlighter-rouge">Targets</code>.</p>

<p><img src="/images/RelationalConnection11.png" alt="relconn11" /></p>

<h1 id="3-utworzenie-mapping-u">3. Utworzenie mapping-u</h1>

<p>Przechodzimy do zakladki <code class="highlighter-rouge">Mapping Designer</code> [1] a nastepnie przeciagamy do obszaru roboczego tabele zrodlowa [2] i tabele docelowa [3] i przeciagajac porty wyjsciowe ze zrodla do portow wejsciowych targetu tworzymy mapowanie kolumn [4].</p>

<p><img src="/images/CreateMapping01.png" alt="crtmapping01" /></p>

<p>Skonczona prace zapisujemy wybierajac menu <code class="highlighter-rouge">Repository-&gt;Save</code>.</p>

<p><img src="/images/CreateMapping02.png" alt="crtmapping02" /></p>

<h1 id="4-utworzenie-workflow-u">4. Utworzenie workflow-u</h1>

<p>Workflow tworzymy w narzedziu <code class="highlighter-rouge">Informatica PowerCenter Workflow Manager</code> ktorego mozemy otworzyc klikajac [1]. Nastepnie przechodzimy do zakladki <code class="highlighter-rouge">Workflow Designer</code> [2].</p>

<p>Aby utworzyc nowy workflow uzywamy menu <code class="highlighter-rouge">Workflows-&gt;Create</code>, podajemy nazwe naszego workflowu [3] oraz wybieramy <strong>Integration Service</strong> w ramach ktorego bedzie uruchamiany nasz workflow [4].</p>

<p><img src="/images/CreateWorkflow01.png" alt="crtworkflow01" /><br /></p>

<p>Nastepnie w zakladce <code class="highlighter-rouge">Properties</code> ustawiamy nazwe pliku log-u naszego workflow-u [2] oraz nazwe katalogu w ktorym ma byc on zapisywany.</p>

<p><img src="/images/CreateWorkflow02.png" alt="crtworkflow02" /><br /></p>

<p>Przy konfiguracji nazwy pliku log-u uzylismy jednej z <a href="../98-Build-in-Variables/Build-in-Variables.md">wbudowanych zmiennych</a> -&gt; <strong>$PMWorkflowRunId</strong>. Jeżeli potrzebujemy utworzyc zmiena uzytkownika mozemy to zrobic w zakladce <code class="highlighter-rouge">Variables</code></p>

<p><img src="/images/CreateWorkflow03.png" alt="crtworkflow03" /><br /></p>

<p>My utworzymy sobie 2 zmienne, dla kazdej z nich musimy okreslic jej nazwe [1], typ [2] oraz to czy chcemy aby ostatnia jej wartosc byla zapisywana do repozytorium [3]:</p>
<ul>
  <li>$$wf_WorkflowID</li>
  <li>$$wf_StartTime.</li>
</ul>

<p>Beda one przechowywaly odpowiednio identyfikator uruchomienia naszego workflow-u oraz date i godzine tego uruchomienia. Pozniej przekazemy te zmiene do parametrow naszego mappingu.</p>

<p>OK mamy utworzony workflow mozemy rozpoczac dodawanie do niego task-ow. Uzywamy do tego celu menu <code class="highlighter-rouge">Task-&gt;Create...</code>. W pierwszej kolejnosci dodamy task przypisania wartosci do wczesniej zdefiniowanych zmiennych.</p>

<p><img src="/images/CreateWorkflow04.png" alt="crtworkflow04" /><br /></p>

<p>Wybieramy <code class="highlighter-rouge">Assigment</code> jak typ dodawanego task-u [2], wprowadzamy jego nazwe [3], klikamy <code class="highlighter-rouge">Create</code> i zamykamy okienko. Kolejnym krokiem jest skonfigurowanie utworzonego task-u. W tym celu klikamy PPM na wybranym tasku i klikamy <code class="highlighter-rouge">Edit...</code></p>

<p><img src="/images/CreateWorkflow06.png" alt="crtworkflow06" /><br /></p>

<p>Aby w tasku <strong>Assigment</strong> moc przypisac wartosci zmiennych musimy te zmienne wpierw utworzyc w przeciwnym wypadku zobaczymy taki oto komunikat.</p>

<p><img src="/images/CreateWorkflow05.png" alt="crtworkflow05" /><br /></p>

<p>My mielismy nasze zmienne zdefiniowane wczesniej wiec mozemy przejsc do przypisania im wartosci.
<img src="/images/CreateWorkflow07.png" alt="crtworkflow07" /><br /></p>

<p>Po raz kolejny uzywamy tutaj zmiennej <strong>$PMWorkflowRunId</strong> oraz <strong>WORKFLOWSTARTTIME</strong> ktora rowniez jest <a href="../98-Build-in-Variables/Build-in-Variables.md">zmienna wbudowana</a>. Na zakonczenie klikamy <code class="highlighter-rouge">OK</code>.</p>

<p>Kolejnym etapem jest ustawienie odpowiednich nastepstw pomiedzy zadaniami. Do tego celu wykorzystujemy menu <code class="highlighter-rouge">Tasks-&gt;Link Task</code> albo korzystamy z paska narzedzi.
<img src="/images/CreateWorkflow08.png" alt="crtworkflow08" /><br /></p>

<p><img src="/images/CreateWorkflow09.png" alt="crtworkflow09" /><br /></p>

<p>Dodajemy kolejne zadanie, tym razem typu <code class="highlighter-rouge">Session</code>.</p>

<p><img src="/images/CreateWorkflow10.png" alt="crtworkflow10" /><br /></p>

<p>i wybieramy ktory z naszych mapping-ow chcemy w ramach tej sesji uruchamiac [1] i klikamy OK [2]
<img src="/images/CreateWorkflow11.png" alt="crtworkflow11" /><br /></p>

<p>a nastepnie definiujemy nastepstwo, uruchomienie naszego mappingu w sesji ma nastapic po przypisaniu zmiennym wartosci.
<img src="/images/CreateWorkflow12.png" alt="crtworkflow12" /><br /></p>

<p>Ostatnim krokiem bedzie skonfigurowanie sesji. Ale zanim do tego przejdziemy upewnimy sie czy mamy utworzone odpowiednie polaczenia do bazy danych. Wybieramy menu <code class="highlighter-rouge">Connections-&gt;Relational...</code>.</p>

<p><img src="/images/CreateWorkflow19.png" alt="crtworkflow19" /><br /></p>

<p>Jeżeli w okienku ktore nam sie otworzylo widzimy juz utworzone polaczenie do naszej bazy nie musimy nic robic. Klikamy <code class="highlighter-rouge">Close</code> [4] i przechodzimy do konfiguracji sesji.<br />
Ja natomiast pokaze jak dodac takie polaczenie gdyby nie bylo jeszcze zdefiniowane. Zaczynamy od wybrania <code class="highlighter-rouge">New...</code> [1] nastepnie wybieramy rodzaj/typ [2] naszego polaczenia. My bedziemy sie laczyc z MSSQL wiec wybieramy <strong>Microsoft SQL Server</strong>. Nasz wybor zatwierdzamy klikajac <code class="highlighter-rouge">OK</code> [3].</p>

<p><img src="/images/CreateWorkflow20.png" alt="crtworkflow20" /><br /></p>

<p>Przechodzimy do okienka w ktorym ustawiamy nazwe naszego polaczenia [1], podajemy kredentiale ktorych bedziemy uzywac do laczenia sie z baza danych: uzytkownika [2] i haslo [3]. Na koncu podajemy nazwe bazy danych [4] i serwera na ktorym dziala usluga MSSQL [5]. Poprawnosc wprowadzonych informacji zatwierdzamy kliknieciem <code class="highlighter-rouge">OK</code> [6].</p>

<p><img src="/images/CreateWorkflow21.png" alt="crtworkflow21" /><br /></p>

<p>Proces ten powtarzamy tyle razy ile potrzebujemy polaczen do roznych baz danych.<br /></p>

<p>Po utworzeniu polaczen mozemy przejsc do skonfigurowania sesji. W tym celu klikamy PPM na poprzednio utworzonej sesji i wybieramy menu <code class="highlighter-rouge">Edit...</code></p>

<p><img src="/images/CreateWorkflow13.png" alt="crtworkflow13" /><br /></p>

<p>W zakladce <code class="highlighter-rouge">Properties</code> konfigurujemy nazwe pliku logu-u [1] naszej sesji, nazwe katalogu w ktorym ten log bedzie zapisywany [2] oraz wskazujemy jezeli jest taka koniecznosc tzw. <code class="highlighter-rouge">Parameter File</code> [3]. Jest to plik ktory jest uzywany do ustawienia wartosci zmiennych uzywanych podczas sesji.
Ostatnia bardzo przydatna opcja ktora nalezy ustawic w przypadku naszego scenariusza jest <code class="highlighter-rouge">Treat source row as</code> [4]. Opcja ta determinuje <a href="https://docs.informatica.com/data-integration/powercenter/10-4-0/workflow-basics-guide/sources/working-with-relational-sources/defining-the-treat-source-rows-as-property.html">sposob/wplyw jaki na tabele docelowa beda mialy rekordy do niej plynace</a>. My wybieramy <strong>Data driven</strong> poniewaz w mappingu z wykorzystaniem transformacji <strong>Updade Strategy</strong> okreslamy rozne dzialania w zaleznosci od tego czy dany rekord jest nowy lub zmieniony.</p>

<p><img src="/images/CreateWorkflow14.png" alt="crtworkflow14" /><br /></p>

<p>Ok, teraz zajmiemy sie konfiguracja naszego mappingu. W tym celu przechodzimy do zakladki <code class="highlighter-rouge">Mapping</code>, <code class="highlighter-rouge">Transformations</code> [1] i zaczynamy od ustawienia szczegolow polaczenia dla transformacji <strong>Source Qualifier</strong> [4]. Dla polaczen relacyjnych jako typ procesu czytajacego dane [2] ustawiamy <strong>Relational Reader</strong> a nastepnie wybieramy nazwe polaczenia do bazy danych [3] ktorego bedziemy uzywac w procesie pobierania danych.</p>

<p><img src="/images/CreateWorkflow15.png" alt="crtworkflow15" /><br /></p>

<p>Kolejny krok to konfiguracja polaczenia do naszej tabeli docelowej. Przechodzimy do [4] i podobnie jak w przypadku <strong>Source Qualifier</strong> okreslamy typ procesu, tym razem jednak, zapisujacego dane [2] jako <strong>Relational Writer</strong> a nastepnie wybieramy nazwe polaczenia do bazy danych [3] ktorego bedziemy uzywac w procesie zapisywania danych.</p>

<p><img src="/images/CreateWorkflow16.png" alt="crtworkflow16" /><br /></p>

<p>W przypadku konfigurowania polaczenia do tabeli docelowej musimy dodatkowo zwrocic uwage na tzn. <code class="highlighter-rouge">Target load type</code> [5]. Poprzez odpowienie ustawienie tej opcji decydujemy czy operacje na tabeli beda wykonywane w trybie <strong>BULK</strong> czy tez <strong>NORMAL</strong>. Co wazne, samo ustawienie trybu <strong>BULK</strong> nie gwarantuje nam ze operacje beda wykonywane w tym trybie. Dodatkowo sterownik uzywany w ramach danego polaczenia musi wspierac taki tryb. Uzywany przez nas sterownik <strong>SQL Server Native Client 11.0</strong> takiego trybu nie wspiera, wiec ustawienie tej opcji nie ma dla nas znaczenia.
Co wazne, w trybie <strong>BULK</strong> mozemy tylko insertowac.<br /></p>

<p>Na zakonczenie skonfigurujemy sposob przekazywania wartosci ze zmiennych workflow-u do parametrow mapping-u. Przechodzimy do zakladki <code class="highlighter-rouge">Components</code> i klikamy <code class="highlighter-rouge">presession_variable_assignment</code> [1].</p>

<p><img src="/images/CreateWorkflow17.png" alt="crtworkflow16" /><br /></p>

<p>Na kolejnym ekranie konfigurujemy ktore zmienne workflow-u [4] maja byc przypisane [3] do ktorych zmiennych mapping-u [2].</p>

<p><img src="/images/CreateWorkflow18.png" alt="crtworkflow16" /><br /></p>


  </article>

</div>

      </div>
    </div>
  </body>
</html>